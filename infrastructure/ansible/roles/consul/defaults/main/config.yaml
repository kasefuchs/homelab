---
# The Consul datacenter name this node belongs to.
consul_config_datacenter: default

# The unique name for this Consul node (defaults to the inventory hostname).
consul_config_node_name: "{{ inventory_hostname }}"

# Whether this node runs in server mode (true for servers, false for clients).
consul_config_server: true

# The gossip encryption key for securing communication between Consul agents.
consul_config_encrypt: ""

# A list of addresses to join other Consul agents on startup.
consul_config_retry_join: []

# Number of servers required to bootstrap a new cluster.
consul_config_bootstrap_expect: 1

# The network interface IP address Consul will bind to for internal communication.
consul_config_bind_address: "{{ nebula_certificate_entity_host_ip | ansible.utils.ipaddr('address') }}"

# A list of addresses Consul will listen on for client-facing services (HTTP, DNS, gRPC, etc.).
consul_config_client_addresses:
  - "{{ nebula_certificate_entity_host_ip | ansible.utils.ipaddr('address') }}"
  - "{{ ansible_default_ipv4.address }}"
  - "127.0.0.1"

# The UDP/TCP port Consul will use for DNS queries.
consul_config_dns_port: 8600

# Addresses Consul will bind to for handling DNS requests.
consul_config_dns_addresses: ["127.0.0.1"]

# The HTTPS API port used for secure communication with Consul.
consul_config_https_port: 8501

# Addresses on which the Consul HTTPS API will listen.
consul_config_https_addresses: "{{ consul_config_client_addresses }}"

# The gRPC TLS port used for secure remote procedure calls within the Consul ecosystem.
consul_config_grpc_tls_port: 8503

# Addresses Consul will bind to for the secure gRPC service.
consul_config_grpc_tls_addresses: "{{ consul_config_client_addresses }}"
