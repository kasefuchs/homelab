---
# The user to run Nebula as.
nebula_config_user: nebula

# The group to run Nebula as.
nebula_config_group: nebula

# Directory where Nebula configuration files will be stored.
nebula_config_dir: /etc/nebula/

# Full path to the main Nebula configuration file.
nebula_config_file: "{{ (nebula_config_dir, 'config.yaml') | ansible.builtin.path_join }}"

# Directory where Nebula certificate files will be stored in the config path.
nebula_config_cert_dir: "{{ (nebula_config_dir, 'certs') | ansible.builtin.path_join }}"

# Directory where Nebula CA certificate files will be stored in the config path.
nebula_config_cert_ca_dir: "{{ (nebula_config_cert_dir, 'ca') | ansible.builtin.path_join }}"

# Directory where Nebula entity certificate files will be stored in the config path.
nebula_config_cert_entity_dir: "{{ (nebula_config_cert_dir, 'entity') | ansible.builtin.path_join }}"

# Paths to Nebula's certificate files (CA, certificate, and key).
nebula_config_pki:
  ca: "{{ (nebula_config_cert_ca_dir, 'nebula.crt') | ansible.builtin.path_join }}"
  key: "{{ (nebula_config_cert_entity_dir, 'host.key') | ansible.builtin.path_join }}"
  cert: "{{ (nebula_config_cert_entity_dir, 'host.crt') | ansible.builtin.path_join }}"

# Pebble service layer definition for the Nebula service.
nebula_config_pebble_layer:
  services:
    nebula:
      override: replace
      startup: enabled
      command: "{{ nebula_install_binary_file }} -config={{ nebula_config_file }}"
      user: "{{ nebula_config_user }}"
      group: "{{ nebula_config_group }}"

# Path to the Pebble layer file that contains the Nebula service configuration.
nebula_config_pebble_layer_file: "{{ (pebble_config_layer_dir, '001-nebula.yaml') | ansible.builtin.path_join }}"
