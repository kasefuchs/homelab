---
- name: Create Nebula configuration directory
  ansible.builtin.file:
    path: "{{ nebula_config_dir }}"
    mode: "0755"
    state: directory
    owner: root
    group: root

- name: Render Nebula config template
  notify:
    - Enable Nebula service
    - Restart Nebula service
  ansible.builtin.template:
    src: config.yaml.j2
    dest: "{{ nebula_config_file }}"
    mode: "0644"
    owner: root
    group: root
