---
# Port on which CoreDNS will listen for incoming DNS queries.
coredns_config_port: 53

# The user to run CoreDNS as.
coredns_config_user: coredns

# The group to run CoreDNS as.
coredns_config_group: coredns

# Directory where CoreDNS configuration files will be stored.
coredns_config_dir: /etc/coredns/

# Full path to the main CoreDNS configuration file.
coredns_config_file: "{{ (coredns_config_dir, 'Corefile') | ansible.builtin.path_join }}"

# The directory where individual zone files are stored.
coredns_config_zone_dir: "{{ (coredns_config_dir, 'zones') | ansible.builtin.path_join }}"

# The directory where individual configuration files are stored.
coredns_config_include_dir: "{{ (coredns_config_dir, 'conf.d') | ansible.builtin.path_join }}"

# The glob of the included zone configuration files.
coredns_config_include_glob: "{{ (coredns_config_include_dir, '*.conf') | ansible.builtin.path_join }}"

# Pebble service layer definition for the CoreDNS service.
coredns_config_pebble_layer:
  services:
    coredns:
      override: replace
      startup: enabled
      command: "{{ coredns_install_binary_file }} -conf={{ coredns_config_file }} -dns.port={{ coredns_config_port }}"
      user: "{{ coredns_config_user }}"
      group: "{{ coredns_config_group }}"

# Path to the Pebble layer file that contains the CoreDNS service configuration.
coredns_config_pebble_layer_file: "{{ (pebble_config_layer_dir, '002-coredns.yaml') | ansible.builtin.path_join }}"
