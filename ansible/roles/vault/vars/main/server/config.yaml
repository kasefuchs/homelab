---
# Directory where Vault server config files will be stored.
vault_server_config_dir: /etc/vault

# Directory where Vault server data will be stored.
vault_server_config_state_dir: /var/lib/vault

# Full path to the main Vault server config file.
vault_server_config_file: "{{ (vault_server_config_dir, 'config.hcl') | ansible.builtin.path_join }}"

# Directory where Vault server certificate files will be stored in the config path.
vault_server_config_cert_dir: "{{ (vault_server_config_dir, 'certs') | ansible.builtin.path_join }}"

# Directory where Vault server CA certificate files will be stored in the config path.
vault_server_config_cert_ca_dir: "{{ (vault_server_config_cert_dir, 'ca') | ansible.builtin.path_join }}"

# Directory where Vault server entity certificate files will be stored in the config path.
vault_server_config_cert_entity_dir: "{{ (vault_server_config_cert_dir, 'entity') | ansible.builtin.path_join }}"

# Pebble service layer definition for the Vault server service.
vault_server_config_pebble_layer:
  services:
    vault:
      override: replace
      startup: enabled
      command: "{{ vault_install_binary_file }} server -config={{ vault_server_config_file }}"
      user: "{{ vault_install_user }}"
      group: "{{ vault_install_group }}"
      requires: "{{ vault_server_config_service_dependencies | reject('equalto', omit) }}"
      after: "{{ vault_server_config_service_dependencies | reject('equalto', omit) }}"

# Path to the Pebble layer file that contains the Vault server service config.
vault_server_config_pebble_layer_file: "{{ (pebble_config_layer_dir, '003-vault.yaml') | ansible.builtin.path_join }}"
