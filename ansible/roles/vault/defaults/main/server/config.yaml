---
# The API address this Vault node advertises to clients and other nodes.
vault_server_config_advertise_api_address: "https://{{ common_internal_fqdn }}:{{ vault_server_config_api_listen_port }}"

# The cluster address this Vault node advertises for internal cluster communication (Raft).
vault_server_config_advertise_cluster_address: "https://{{ common_internal_fqdn }}:{{ vault_server_config_cluster_listen_port }}"

# Enables the Vault web UI.
vault_server_config_enable_ui: true

# Disables mlock, which normally prevents Vault from being swapped to disk. Useful for development or when mlock is not available.
vault_server_config_disable_mlock: true

# The port on which the Vault API will listen.
vault_server_config_api_listen_port: 8200

# The IP and port Vault will listen on for client API requests.
vault_server_config_api_listen_address: "0.0.0.0:{{ vault_server_config_api_listen_port }}"

# The port used for internal cluster (Raft) communication.
vault_server_config_cluster_listen_port: 8201

# The IP and port Vault will listen on for cluster traffic (used in Raft).
vault_server_config_cluster_listen_address: "0.0.0.0:{{ vault_server_config_cluster_listen_port }}"

# The name of the Vault cluster.
vault_server_config_cluster_name: global

# The telemetry config of Vault server.
vault_server_config_telemetry:
  disable_hostname: true
  prometheus_retention_time: 1m

# Sets the unique node ID for the Raft cluster, typically the hostname.
vault_server_config_node_name: "{{ inventory_hostname }}"

# List of peer nodes to attempt to join during Raft initialization (excluding the current node).
vault_server_config_retry_join: "{{ groups['vault_servers'] | reject('equalto', inventory_hostname) | map('regex_replace', '^(.*)$', 'https://\\1.internal:8200')
  }}"

# List of services that service depends on for startup ordering.
vault_server_config_service_dependencies: [coredns]
